<html lang="en" ng-app="app">
  <base href="/">
  <head>
    <title>Ex Mormon Missionary Map</title>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="description" content="This map serves as a visual representation of the mormon missionaries that have left The Church of Jesus Christ of Latter-Day Saints." />
    <meta property="og:title" content="Ex Mormon Missionary Map" />
    <meta itemprop="description" content="This map serves as a visual representation of the mormon missionaries that have left The Church of Jesus Christ of Latter-Day Saints.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic">

    <style>

      md-pagination-wrapper {
        width: auto!important;
      }

      .content {
        position: relative;
      }

      .content md-progress-circular{
        position: absolute;
        top: 50%;
        left:50%;
        margin-top: -20px;
        margin-left: -20px;
        z-index: 1;
      }

      .stat-column {
        text-align: center;
      }

      .stat-column h3 {
        margin-bottom: 0;
      }

      .stat-column p {
        color: #888;
      }

      @media (min-width: 960px) {
        .map {
          height: calc(100vh - 64px);
        }
      }

      @media (max-width: 959px) {
        .map {
          height: calc(100vh - 48px);
        }
      }

      @media (max-width: 699px) {
        .map {
          height: calc(100vh - 56px);
        }
      }
    </style>
  </head>

  <body layout="row" ng-controller="mainController as main"  id="{{$state}}" ng-cloak>
    <md-sidenav md-component-id="left"
                class="md-sidenav-left"
                md-is-locked-open="$mdMedia('gt-sm')"
                layout="column">
      <md-toolbar class="md-theme-indigo">
        <div class="md-toolbar-tools">
          <h1 hide-gt-sm>About This Site</h1>
          <h1 hide-xs hide-sm>Ex-Mormon Missionary Map</h1>
          <span flex></span>
          <md-button class="md-icon-button" ng-click="main.toggleNav()" hide-gt-sm>
            <md-icon aria-label="Close Sidebar" class="material-icons">close</md-icon>
          </md-button>
        </div>
      </md-toolbar>
      <div ng-hide="main.selectedMissions.length > 0">
        <md-content class="layout-margin">
          <p>
            This map serves as a visual representation of the mormon missionaries that have left The Church of Jesus Christ of Latter-Day Saints.
          </p>
          <p>
            If you served a mission and left the church, add yourself to the map.
          </p>

          <md-button class="md-primary md-raised md-button"
                     style="width: 90%"
                     ng-click="main.showNewRMDialog($event); main.toggleNav();">
                     Add yourself to the map
          </md-button>

        </md-content>
        <md-content layout="row">
          <div flex="50" class="stat-column">
            <h3 class="md-display-3">{{RMCount}}</h3>
            <p>Missionaries</p>
          </div>

          <div flex class="stat-column">
            <h3 class="md-display-3">{{missionCount}}</h3>
            <p>Missions</p>
          </div>
        </md-content>

        <span flex></span>

        <md-menu-item>
                <a md-button href="mailto:feedback@exrmmap.com"><p><md-icon class="material-icons">mail</md-icon>Send Feedback <span hide-xs>About This Site</span></p></a>
        </md-menu-item>
      </div>
      <md-toolbar ng-show="main.selectedMissions.length > 0">
        <div class="md-toolbar-tools">
          <md-button class="md-icon-button" ng-click="main.selectedMissions = null">
            <md-icon aria-label="Back to main sidebar" class="material-icons">arrow_back</md-icon>
          </md-button>
          <h2>Reasons for Leaving</h2>
        </div>
      </md-toolbar>
      <md-content flex ng-show="main.selectedMissions.length > 0">
        <section ng-repeat="mission in main.selectedMissions">
          <md-subheader><h3>{{mission.name}}</h3></md-subheader>
          <md-list layout-padding>
            <md-list-item class="md-3-line" ng-repeat="RM in mission.missionaries">
                <div class="md-list-item-text">
                  <p>{{RM.leftChurch.reason}}</p>
                  <p><strong>Served</strong> {{RM.missionDetails.start}} - {{RM.missionDetails.end}}</p>
                  <p><strong>Left</strong> {{RM.leftChurch.date}}</p>

                </div>
                <md-divider ng-if="!$last"></md-divider>

            </md-list-item>
          </md-list>
        </section>
      </md-content>
    </md-sidenav>
    <div md-layout="column" flex>

      <md-toolbar class="md-theme-indigo">
        <div class="md-toolbar-tools">
        <h1 hide-gt-sm>Ex-Mormon Missionary Map</h1>
        <span flex></span>
        <md-button class="md-raised md-button"
                   ng-click="main.toggleNav()" hide-gt-sm>
                   About <span hide-xs>This Site</span>
        </md-button>
      </div>
      </md-toolbar>
      <div class="content" ui-view></div>
    </div>
  </body>

  <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>

  <!-- Angular Material requires Angular.js Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>

  <!-- Angular Material Library -->
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>

  <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBOuqyDzI-BqSgSjv1cB3K0P5urSjqNj8Y&libraries=places"></script> -->

  <!-- Other dependencies -->
  <script src="libs/angular-ui-router/release/angular-ui-router.min.js"></script>
  <script src='libs/ngMask/dist/ngMask.min.js'></script>
  <script src="libs/ngmap/build/scripts/ng-map.min.js"></script>
  <script src="libs/js-marker-clusterer/src/markerclusterer_compiled.js"></script>

  <script src="app.js"></script>
  <script src="app.Route.js"></script>
  <script src="mainCtrl.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-83412704-1', 'auto');
    ga('send', 'pageview');
  </script>

</html>
